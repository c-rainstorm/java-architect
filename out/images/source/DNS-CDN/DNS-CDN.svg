<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="573px" preserveAspectRatio="none" style="width:735px;height:573px;background:#FFFFFF;" version="1.1" viewBox="0 0 735 573" width="735px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.4883" id="_title" style="stroke:none;stroke-width:1.0;" width="128" x="302.5" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="118" x="307.5" y="28.5352">带CDN的DNS解析</text><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:1.5;" width="254" x="61" y="120.2871"/><rect fill="none" height="134.8633" style="stroke:#000000;stroke-width:1.5;" width="536" x="61" y="210.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="33" x2="33" y1="73.9766" y2="537.9453"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="127" x2="127" y1="73.9766" y2="537.9453"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="249" x2="249" y1="73.9766" y2="537.9453"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="393" x2="393" y1="73.9766" y2="537.9453"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="592" x2="592" y1="73.9766" y2="537.9453"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="687" x2="687" y1="73.9766" y2="537.9453"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="56" x="5" y="42.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="12" y="63.0234">浏览器</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="56" x="5" y="536.9453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="12" y="557.4805">浏览器</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="71" y="42.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="78" y="63.0234">本地DNS服务器</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="71" y="536.9453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="78" y="557.4805">本地DNS服务器</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="193" y="42.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="200" y="63.0234">权威DNS服务器</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="193" y="536.9453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="200" y="557.4805">权威DNS服务器</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="156" x="315" y="42.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142" x="322" y="63.0234">CDN的权威DNS服务器</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="156" x="315" y="536.9453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142" x="322" y="557.4805">CDN的权威DNS服务器</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="549" y="42.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="556" y="63.0234">CDN服务器</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="549" y="536.9453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="556" y="557.4805">CDN服务器</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84" x="645" y="42.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="652" y="63.0234">网站服务器</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84" x="645" y="536.9453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="652" y="557.4805">网站服务器</text><polygon fill="#181818" points="115,101.2871,125,105.2871,115,109.2871,119,105.2871" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="33" x2="121" y1="105.2871" y2="105.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="40" y="100.5449">查询网站IP</text><path d="M61,120.2871 L135,120.2871 L135,127.5977 L125,137.5977 L61,137.5977 L61,120.2871 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:1.5;" width="254" x="61" y="120.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="76" y="133.8555">loop</text><polygon fill="#181818" points="237,154.9082,247,158.9082,237,162.9082,241,158.9082" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="127" x2="243" y1="158.9082" y2="158.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="134" y="154.166">查询网站IP</text><polygon fill="#181818" points="138,191.2188,128,195.2188,138,199.2188,134,195.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="132" x2="248" y1="195.2188" y2="195.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="144" y="190.4766">CNAME 域名</text><path d="M61,210.2188 L135,210.2188 L135,217.5293 L125,227.5293 L61,227.5293 L61,210.2188 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="134.8633" style="stroke:#000000;stroke-width:1.5;" width="536" x="61" y="210.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="76" y="223.7871">loop</text><polygon fill="#181818" points="381,244.8398,391,248.8398,381,252.8398,385,248.8398" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="127" x2="387" y1="248.8398" y2="248.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="134" y="244.0977">CNAME域名</text><line style="stroke:#181818;stroke-width:1.0;" x1="393" x2="435" y1="324.082" y2="324.082"/><line style="stroke:#181818;stroke-width:1.0;" x1="435" x2="435" y1="324.082" y2="337.082"/><line style="stroke:#181818;stroke-width:1.0;" x1="394" x2="435" y1="337.082" y2="337.082"/><polygon fill="#181818" points="404,333.082,394,337.082,404,341.082,400,337.082" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="400" y="273.4082">递归查询和负载均衡</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="400" y="288.7188">根据拓扑结构，熔炼，时延，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="400" y="304.0293">从全国提供服务的CDN缓存节点</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="400" y="319.3398">选一个最合适的</text><polygon fill="#181818" points="138,369.3926,128,373.3926,138,377.3926,134,373.3926" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="132" x2="392" y1="373.3926" y2="373.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="11" x="144" y="368.6504">IP</text><polygon fill="#181818" points="44,398.7031,34,402.7031,44,406.7031,40,402.7031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="38" x2="126" y1="402.7031" y2="402.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="11" x="50" y="397.9609">IP</text><polygon fill="#181818" points="580,428.0137,590,432.0137,580,436.0137,584,432.0137" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="33" x2="586" y1="432.0137" y2="432.0137"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="40" y="427.2715">请求</text><polygon fill="#181818" points="675,457.3242,685,461.3242,675,465.3242,679,461.3242" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="592" x2="681" y1="461.3242" y2="461.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="599" y="456.582">请求</text><polygon fill="#181818" points="603,486.6348,593,490.6348,603,494.6348,599,490.6348" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="597" x2="686" y1="490.6348" y2="490.6348"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="609" y="485.8926">响应</text><polygon fill="#181818" points="44,515.9453,34,519.9453,44,523.9453,40,519.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="38" x2="591" y1="519.9453" y2="519.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="50" y="515.2031">响应</text><!--MD5=[b92fce8f7caf9ff481178018a4f5b1b3]
@startuml DNS-CDN

title 带CDN的DNS解析

浏览器 -> 本地DNS服务器 : 查询网站IP
loop
本地DNS服务器 -> 权威DNS服务器 : 查询网站IP
end 
本地DNS服务器 <- 权威DNS服务器 : CNAME 域名

loop
本地DNS服务器 -> CDN的权威DNS服务器 : CNAME域名
CDN的权威DNS服务器 -> CDN的权威DNS服务器 : 递归查询和负载均衡\n根据拓扑结构，熔炼，时延，\n从全国提供服务的CDN缓存节点\n选一个最合适的
end 
本地DNS服务器 <- CDN的权威DNS服务器 : IP
浏览器 <- 本地DNS服务器 : IP

浏览器 -> CDN服务器 : 请求
CDN服务器 -> 网站服务器 : 请求
CDN服务器 <- 网站服务器 : 响应
浏览器 <- CDN服务器 : 响应

@enduml

PlantUML version 1.2022.7(Tue Aug 23 01:01:30 CST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: CN
--></g></svg>